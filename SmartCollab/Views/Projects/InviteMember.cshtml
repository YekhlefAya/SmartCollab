@using SmartCollab.Models
@{
    ViewData["Title"] = "Inviter un membre";
    ViewData["Breadcrumb"] = new List<(string, string)>
    {
        ("Accueil", "/"),
        ("Projets", "/Projects"),
        ("Détails du projet", $"/Projects/Details/{Model.ProjectId}"),
        ("Inviter", "")
    };
}

<div class="max-w-3xl mx-auto">
    <div class="bg-white rounded-2xl shadow-sm p-8">
        <h2 class="text-xl font-bold text-gray-800 mb-6">Inviter un membre</h2>

        <form method="post" asp-action="InviteMember" asp-controller="Projects">
            @* Champ caché pour l'ID du projet *@
            <input type="hidden" name="ProjectId" value="@Model.ProjectId" />

            <div class="space-y-6">
                <div>
                    <label for="Email" class="block text-sm font-medium text-gray-700 mb-2">Email du membre *</label>

                    @if (!string.IsNullOrEmpty(Model.ErrorMessage))
                    {
                        <p class="text-red-600 text-sm mb-2">@Model.ErrorMessage</p>
                    }

                    <input type="email" id="Email" name="Email" required
                           class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition"
                           placeholder="exemple@domaine.com"
                           value="@Model.Email">
                </div>


                <div>
                    <label for="Role" class="block text-sm font-medium text-gray-700 mb-2">Rôle *</label>
                    <select id="Role" name="Role" required
                            class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition">
                        <option value="">Sélectionnez un rôle</option>
                       
                        @if (Model.Role == "Manager")
                        {
                            <option value="Manager" selected>Manager</option>
                        }
                        else
                        {
                            <option value="Manager">Manager</option>
                        }
                        @if (Model.Role == "Collaborator")
                        {
                            <option value="Collaborator" selected>Collaborateur</option>
                        }
                        else
                        {
                            <option value="Collaborator">Collaborateur</option>
                        }
                        @if (Model.Role == "Viewer")
                        {
                            <option value="Viewer" selected>Lecteur</option>
                        }
                        else
                        {
                            <option value="Viewer">Lecteur</option>
                        }
                    </select>

                </div>

                <div class="flex justify-end space-x-4 pt-4 border-t">
                    <a href="@Url.Action("Details", "Projects", new { id = Model.ProjectId })"
                       class="px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition font-medium">
                        Annuler
                    </a>
                    <button type="submit"
                            class="px-6 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition font-medium">
                        <i class="fas fa-user-plus mr-2"></i>Inviter
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
